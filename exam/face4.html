<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>图书管理</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <style>
    h1 {
      text-align: center;
      color: rosybrown;
      font-size: 100px;
      margin-top: 10px;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;

      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      background-image: url("tupian5.jpg");

    }


    h1 {
      text-align: center;
      margin-top: 50px;
    }

    table td,
    table th {
      text-align: center;
    }

    table {
      background-color: burlywood;
    }

    .alert {
      display: none;
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #28a745;
      color: white;
      padding: 15px;
      border-radius: 5px;
      z-index: 1000;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      width: 400px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
      text-align: left;
    }

    .modal-content h2 {
      margin: 0;
      font-size: 20px;
      color: #333;
    }

    .modal-content label {
      display: block;
      margin: 15px 0 5px;
      font-size: 14px;
      color: #555;
    }

    .modal-content input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    .modal-content button {
      padding: 10px 20px;
      margin-top: 10px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    .modal-content .save {
      background-color: #28a745;
      color: white;
    }

    .modal-content .save:hover {
      background-color: #218838;
    }

    .modal-content .cancel {
      background-color: #dc3545;
      color: white;
    }

    .modal-content .cancel:hover {
      background-color: #c82333;
    }



    select,
    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }
  </style>
</head>

<body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <h1>图书管理</h1>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>书名</th>
        <th>作者</th>

        <th>图书编号</th>
        <th>类别</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>西游记</td>
        <td>吴承恩</td>

        <td>1001</td>
        <td>名著</td>
        <td>
          <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"> <i class="bi-trash-fill"></i>
            删除</button>
          <button class="btn btn-warning btn-sm" onclick="openModifyWindow(this)"> <i class="bi-pencil"></i>
            修改</button>
        </td>
      </tr>
      <tr>
        <td>解忧杂货店</td>
        <td>【日】东野圭吾</td>

        <td>1002</td>
        <td>小说类</td>
        <td>
          <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"> <i class="bi-trash-fill"></i>
            删除</button>
          <button class="btn btn-warning btn-sm" onclick="openModifyWindow(this)"> <i class="bi-pencil"></i>
            修改</button>
        </td>
      </tr>
      <tr>
        <td>Java实用教程</td>
        <td>耿祥义</td>

        <td>1003</td>
        <td>计算机类</td>
        <td>
          <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"> <i class="bi-trash-fill"></i>
            删除</button>
          <button class="btn btn-warning btn-sm" onclick="openModifyWindow(this)"> <i class="bi-pencil"></i>
            修改</button>
        </td>
      </tr>
      <tr>
        <td>朝花夕拾</td>
        <td>鲁迅</td>

        <td>1004</td>
        <td>文学类</td>
        <td>
          <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"> <i class="bi-trash-fill"></i>
            删除</button>
          <button class="btn btn-warning btn-sm" onclick="openModifyWindow(this)"> <i class="bi-pencil"></i>
            修改</button>
        </td>
      </tr>
      <tr>
        <td>史记</td>
        <td>司马迁</td>

        <td>1005</td>
        <td>历史类</td>
        <td>
          <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"> <i class="bi-trash-fill"></i>
            删除</button>
          <button class="btn btn-warning btn-sm" onclick="openModifyWindow(this)"> <i class="bi-pencil"></i>
            修改</button>
        </td>
      </tr>
      <tr>
        <td>活着</td>
        <td>余华</td>

        <td>1006</td>
        <td>小说类</td>
        <td>
          <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"> <i class="bi-trash-fill"></i>
            删除</button>
          <button class="btn btn-warning btn-sm" onclick="openModifyWindow(this)"> <i class="bi-pencil"></i>
            修改</button>
        </td>
      </tr>
      <tr>
        <td>梦的解析</td>
        <td>弗洛伊德</td>

        <td>1007</td>
        <td>文学类</td>
        <td>
          <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"> <i class="bi-trash-fill"></i>
            删除</button>
          <button class="btn btn-warning btn-sm" onclick="openModifyWindow(this)"> <i class="bi-pencil"></i>
            修改</button>
        </td>
      </tr>
      <tr>
        <td>......</td>
        <td>......</td>
        <td>......</td>
        <td>......</td>
        <td>
          <button class="btn btn-success btn-sm" onclick="openModal()"> <i class=" bi-plus-square-fill"></i>添加</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div id="myModal" class="modal">
    <div class="modal-content">
      <h2>新增图书</h2>


      <label for="book-name">书本名称</label>
      <input type="text" id="book-name" placeholder="请输入书本名称">

      <label for="book-author">作者</label>
      <input type="text" id="book-author" placeholder="请输入书本作者">

      <label for="book-id">图书编号</label>
      <input type="number" id="book-id" placeholder="请输入图书编号">

      <label for="category">类别</label>
      <select id="category">
        <option value="请选择类别">请选择类别</option>
        <option value="文学类">文学类</option>
        <option value="网络小说">网络小说</option>
        <option value="名著">名著</option>
        <option value="历史类">历史类</option>
      </select>
      <button class="save" onclick="addBook()">保存</button>
      <button class="cancel" onclick="closeModal()">取消</button>
    </div>
  </div>

  <div class="alert" id="alert-box"></div>
</body>
<script>
  //实现表格删除
  function deleteRow(btn) {
    const row = btn.parentNode.parentNode;

    const confirmation = confirm('是否删除该书本信息');
    if (confirmation) {
      row.parentNode.removeChild(row);
    }
  }
  //实现表格的编辑
  function openModifyWindow(btn) {
    const row = btn.parentNode.parentNode;
    const name = row.cells[0].innerHTML;
    const workId = row.cells[1].innerHTML;
    const departmentId = row.cells[2].innerHTML;
    const number = row.cells[3].innerHTML;

    const newName = prompt("请修改书名", name);
    const newWorkId = prompt("请修改作者", workId);
    const newDepartmentId = prompt("请修改类别", departmentId);
    const newnumber = prompt("请修改编号", number);

    if (newName !== null && newWorkId !== null && newDepartmentId !== null && newnumber !== null) {
      row.cells[0].innerHTML = newName;
      row.cells[1].innerHTML = newWorkId;
      row.cells[2].innerHTML = newDepartmentId;
      row.cells[3].innerHTML = newnumber;
    }
  }
  //实现弹窗出现
  function openModal() {
    document.getElementById('myModal').style.display = 'flex';
  }
  //实现关闭弹窗
  function closeModal() {
    document.getElementById('myModal').style.display = 'none';
  }
  //实现输入框清空
  function clearModalInputs() {
    document.getElementById('book-name').value = "";
    document.getElementById('book-author').value = "";
    document.getElementById('book-id').value = "";
    document.getElementById('category').value = "";
  }
  //实现将弹窗内容添加到表格
  function addBook() {
    // 获取模态框中输入的图书信息
    const bookName = document.getElementById('book-name').value;
    const bookAuthor = document.getElementById('book-author').value;
    const bookId = document.getElementById('book-id').value;
    const category = document.getElementById('category').value;

    // 简单的输入验证，确保必填项都有值
    if (!bookName || !bookAuthor || !bookId || category === "请选择类别") {
      document.getElementById('alert-box').textContent = "请填写完整图书信息！";
      document.getElementById('alert-box').style.display = "block";
      setTimeout(() => {
        document.getElementById('alert-box').style.display = "none";
      }, 3000);
      return;
    }

    // 获取表格的tbody元素
    const tableBody = document.querySelector('table tbody');

    // 获取表格已有的行数
    const rowCount = tableBody.rows.length;

    // 创建新的表格行
    const newRow = document.createElement('tr');

    // 创建并填充各个单元格
    const nameCell = document.createElement('td');
    nameCell.textContent = bookName;
    const authorCell = document.createElement('td');
    authorCell.textContent = bookAuthor;
    const idCell = document.createElement('td');
    idCell.textContent = bookId;
    const categoryCell = document.createElement('td');
    categoryCell.textContent = category;
    const operationCell = document.createElement('td');
    operationCell.innerHTML = `
      <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"> <i class="bi-trash-fill"></i>
        删除</button>
      <button class="btn btn-warning btn-sm" onclick="openModifyWindow(this)"> <i class="bi-pencil"></i>
        修改</button>
    `;

    // 将单元格添加到新行
    newRow.appendChild(nameCell);
    newRow.appendChild(authorCell);
    newRow.appendChild(idCell);
    newRow.appendChild(categoryCell);
    newRow.appendChild(operationCell);

    // 在倒数第二行插入新行（如果只有一行则直接添加到tbody中）
    if (rowCount > 1) {
      tableBody.insertBefore(newRow, tableBody.rows[rowCount - 1]);
    } else {
      tableBody.appendChild(newRow);
    }
    // 清空弹窗内输入框内容
    clearModalInputs();

    // 关闭模态框
    closeModal();

    // 显示添加成功提示信息
    document.getElementById('alert-box').textContent = "图书添加成功！";
    document.getElementById('alert-box').style.display = "block";
    setTimeout(() => {
      document.getElementById('alert-box').style.display = "none";
    }, 3000);
  }
</script>

</html>